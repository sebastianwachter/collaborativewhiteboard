function draw(t,e,n){var o={};o.lastX=lastX,o.lastY=lastY,o.x=t,o.y=e,o.dragging=n,o.color=color,o.penWidth=penWidth,socket.emit("draw",o),lastX=t,lastY=e}var can=document.getElementById("whiteboard"),context=can.getContext("2d"),socket=io(),paint=!1,lastX,lastY,color="#000000",penWidth=10;context.fillStyle="#ffffff",context.fillRect(0,0,can.width,can.height),$("#whiteboard").mousedown(function(t){var e=t.pageX-$(this).offset().left,n=t.pageY-$(this).offset().top;paint=!0,draw(e,n,!1)}),$("#whiteboard").mousemove(function(t){paint&&draw(t.pageX-$(this).offset().left,t.pageY-$(this).offset().top,!0)}),$("#whiteboard").mouseup(function(){paint=!1}),$("#whiteboard").mouseleave(function(){paint=!1}),can.addEventListener("touchstart",function(t){t.preventDefault(),paint=!0,draw(t.targetTouches[0].pageX-$(this).offset().left,t.targetTouches[0].pageY-$(this).offset().top,!1)},!1),can.addEventListener("touchmove",function(t){t.preventDefault(),paint&&draw(t.targetTouches[0].pageX-$(this).offset().left,t.targetTouches[0].pageY-$(this).offset().top,!0)},!0),can.addEventListener("touchend",function(t){t.preventDefault(),paint=!1},!1),can.addEventListener("touchcancel",function(){paint=!1}),$(".settings #colorPicker").on("change",function(){color=$(this).val()}),$(".settings #sizePicker").on("change",function(){penWidth=$(this).val()}),$(".settings #clear").on("click",function(){socket.emit("clear")}),$(".settings #save").on("click",function(){var t=can.toDataURL();socket.emit("save",t)}),socket.on("remoteDraw",function(t){t.dragging&&(context.beginPath(),context.strokeStyle=t.color,context.lineJoin="round",context.lineWidth=t.penWidth,context.moveTo(t.lastX,t.lastY),context.lineTo(t.x,t.y),context.closePath(),context.stroke())}),socket.on("remoteClear",function(){context.fillRect(0,0,can.width,can.height)}),socket.on("download",function(t){console.log(t)});